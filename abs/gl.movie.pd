#N canvas 333 23 699 755 12;
#X obj 15 3 inlet;
#X obj 47 844 outlet;
#X obj 94 2 inlet;
#X obj 47 798 list trim;
#X obj 114 846 outlet;
#X obj 15 769 t a a;
#X obj 47 821 route bang;
#X msg 94 23 frame \$1;
#X text 519 840 RI;
#X obj 15 868 ofelia f videoplayer-\$0 \; videoplayer\$0:unbind() \;
;
#X f 66;
#X text 115 708 Problems:;
#X text 115 719 - Current frames return a negative value on the last
frame;
#X text 115 729 - play backward have some jiter frames;
#X text 133 765 https://forum.openframeworks.cc/t/autoplay-behaviour-of-ofvideoplayer/35905
;
#X text 116 753 - Always autoplay after loading a file pb (OSX but
not on windows), f 70;
#X text 116 743 - Blank picture after windows re-creation, f 70;
#X obj 15 44 ofelia d videoplayer-\$0 \; local canvas = ofCanvas(this)
\; local args = canvas:getArgs() \; videoplayer\$0 = ofVideoPlayer()
\; local filename \, start \, loop = args[1] \, args[2] \, args[3]
\; local loaded = 0 \; \; function M.new() \; ofWindow.addListener("setup"
\, this) \; if args[1] == nil then print("No file loaded") else M.open(filename)
end \; if args[2] == 1 then M.play() end \; if args[3] == nil then
loop = 0 end end \; \; function M.free() \; ofWindow.removeListener("setup"
\, this) \; videoplayer\$0:close() end \; \; function M.setup() end
\; \; function M.open(string) filename = string \; if ofWindow.exists
then \; videoplayer\$0:close() \; videoplayer\$0:load(filename) \;
if (videoplayer\$0:isLoaded()) then \; print("loaded " .. filename)
\; videoplayer\$0:update() end end \; end \; function M.update() videoplayer\$0:update()
end \; function M.play() videoplayer\$0:play() end \; function M.stop()
videoplayer\$0:stop() end \; function M.pause() videoplayer\$0:setPaused(true)
end \; function M.speed(float) videoplayer\$0:setSpeed(float) end \;
function M.frame(float) videoplayer\$0:setFrame(float) end \; function
M.position(float) videoplayer\$0:setPosition(float) end \; function
M.volume(float) videoplayer\$0:setVolume(float) end \; function M.loop(float)
loop = float end \; function M.close() videoplayer\$0:close() end \;
function M.get() return ofTable (videoplayer\$0:isLoaded() \, videoplayer\$0:isPlaying()
\, ofClamp(videoplayer\$0:getCurrentFrame() \, 0 \, videoplayer\$0:getTotalNumFrames())
\, videoplayer\$0:getTotalNumFrames() \, videoplayer\$0:getWidth()
\, videoplayer\$0:getHeight() \, videoplayer\$0:getDuration()) \; end
\; \; function M.bang() \; if loop == 0 then videoplayer\$0:setLoopState(OF_LOOP_NONE)
end \; if loop == 1 then videoplayer\$0:setLoopState(OF_LOOP_NORMAL)
end \; if loop == 2 then videoplayer\$0:setLoopState(OF_LOOP_PALINDROME)
end \; videoplayer\$0:update() \; videoplayer\$0:bind() \; return(anything)
\; end \;;
#X f 92;
#X connect 0 0 16 0;
#X connect 2 0 7 0;
#X connect 3 0 6 0;
#X connect 5 0 9 0;
#X connect 5 1 3 0;
#X connect 6 0 1 0;
#X connect 6 1 4 0;
#X connect 7 0 16 0;
#X connect 16 0 5 0;
